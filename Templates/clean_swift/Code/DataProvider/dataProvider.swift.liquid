//
//  {{ module_info.name }}{{ module_info.file_name }}
//  {{ module_info.project_name }}
//
//  Created by {{ developer.name }} on {{ date }}.
//  Copyright © {{ year }} {{ developer.company }}. All rights reserved.
//

import Foundation


/// Отвечает за получение данных модуля {{ module_info.name }}
struct {{ module_info.name }}DataProvider: {{ module_info.name }}DataProviderInput {
    let dataStore: {{ module_info.name }}DataStore
    let apiService: {{ module_info.name }}APIServiceProtocol

    init(dataStore: {{ module_info.name }}DataStore, apiService: {{ module_info.name }}APIServiceProtocol) {
        self.dataStore = dataStore
        self.apiService = apiService
    }

    // Предоставление данных согласно определенным Use cases

    func getSomething(completion: @escaping ({{ module_info.name }}Model?, String?) -> Void) {
        if let model = dataStore.mainModel {
            return completion(model, nil)
        }
        apiService.getData { (model, error) in
            if let error = error {
                completion(nil, error)
            } else if let model = model {
                self.dataStore.mainModel = model
                completion(self.dataStore.mainModel, nil)
            }
        }
    }
}
